{"version":3,"file":"static/js/234.41697c3f.chunk.js","mappings":"sOAaiBA,EAAAA,EAAAA,IAASC,EAAAA,EAAAA,OAAK,IAAM,yDAArC,MAEMC,GAAgBC,EAAAA,EAAAA,IAAO,SAAPA,EAAiB,MACnCC,OAAQ,OACRC,OAAQ,QACRC,MAAO,OACPC,OAAQ,QAkDZ,UA/CoBC,KAChB,MAAOC,EAAWC,IAAgBC,EAAAA,EAAAA,WAAS,IACpCC,EAASC,IAAcF,EAAAA,EAAAA,UAAS,IACjCG,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,OACVC,IAAWC,EAAAA,EAAAA,MACXC,EAAcC,IAAmBV,EAAAA,EAAAA,aACjCW,EAAQC,IAAaZ,EAAAA,EAAAA,aACrBa,EAAQC,IAAad,EAAAA,EAAAA,aACrBe,EAAMC,IAAWhB,EAAAA,EAAAA,aAEjBiB,EAAeC,IAAqBC,EAAAA,EAAAA,MA4B3C,OAzBAC,EAAAA,EAAAA,YAAU,KAAO,IAADC,EAAAC,EAAAC,EAAAC,EACZd,EAA8B,QAAfW,EAAChB,EAASoB,aAAK,IAAAJ,OAAA,EAAdA,EAAgBZ,cAChCG,EAAwB,QAAfU,EAACjB,EAASoB,aAAK,IAAAH,OAAA,EAAdA,EAAgBX,QAC1BG,EAAwB,QAAfS,EAAClB,EAASoB,aAAK,IAAAF,OAAA,EAAdA,EAAgBV,QAC1BG,EAAsB,QAAfQ,EAACnB,EAASoB,aAAK,IAAAD,OAAA,EAAdA,EAAgBT,MACxBW,YAAW,KACFnB,EAAQoB,EAAAA,KACbxB,EAAS,OAAO,GACjB,IAAK,GACT,CAACI,KAEJa,EAAAA,EAAAA,YAAU,KACNH,EAAc,CAAEN,SAAQE,SAAQJ,iBAChCmB,QAAQC,IAAId,EAAM,QAClB,MAAMe,EAAW,gCAA+Bf,IAASgB,EAAAA,GAAuB,UAAY,kBAAkBpB,YAAiBE,kBAAuBJ,IACtJP,EAAW4B,EAAS,UAAU,GAC/B,CAACnB,EAAQE,EAAQJ,KAEpBW,EAAAA,EAAAA,YAAU,KAAO,IAADY,EACQ,OAAjBd,QAAiB,IAAjBA,GAAuB,QAANc,EAAjBd,EAAmBe,YAAI,IAAAD,GAAvBA,EAAyBE,MACxBnC,GAAa,EACjB,GACF,CAACmB,KAICiB,EAAAA,EAAAA,KAAAC,EAAAA,SAAA,CAAAC,UACIF,EAAAA,EAAAA,KAAC5C,EAAa,CAAC+C,IAAKrC,EAAS,0BAC9B,C","sources":["views/playPreview/index.js"],"sourcesContent":["import React, {useState} from 'react';\r\nimport { lazy } from 'react';\r\nimport { useSearchParams, useParams, useNavigate, useLocation } from 'react-router-dom';\r\nimport { styled } from '@mui/material/styles';\r\nimport { useCookies } from 'react-cookie';\r\nimport { AUTHORISATION_TOKEN_STORAGE_KEY } from 'utils/constants';\r\nimport { useEffect } from 'react';\r\nimport { useGetTotalInfoMutation, useGetGrwthxInfoMutation } from 'store/slices/apiSlice';\r\nimport Loadable from 'ui-component/Loadable';\r\nimport {ROOM_PREVIEW_MESSAGE,\r\n    ROOM_SAVE_MESSAGE\r\n} from 'utils/constants';\r\n\r\nconst NotFound = Loadable(lazy(() => import('../Page404')));\r\n\r\nconst PreviewIframe = styled('iframe')(() => ({\r\n    border: 'none',\r\n    height: '100vh',\r\n    width: '100%',\r\n    margin: '0'\r\n}));\r\n\r\nconst PlayPreview = () => {\r\n    const [roomState, setRoomState] = useState(false);\r\n    const [roomUrl, setRoomUrl] = useState('');\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n    const [cookies] = useCookies();\r\n    const [assignmentId, setAssignmentId] = useState();\r\n    const [roomId, setRoomId] = useState();\r\n    const [userId, setUserId] = useState();\r\n    const [mode, setMode] = useState();\r\n\r\n    const [getGrwthxInfo, infoGrwthResponse] = useGetGrwthxInfoMutation();\r\n    \r\n    \r\n    useEffect(() => {\r\n        setAssignmentId(location.state?.assignmentId);\r\n        setRoomId(location.state?.roomId);\r\n        setUserId(location.state?.userId);\r\n        setMode(location.state?.mode);\r\n        setTimeout(() => {\r\n            if (!cookies[AUTHORISATION_TOKEN_STORAGE_KEY])\r\n            navigate('/404')\r\n        }, 1000)\r\n    }, [cookies])\r\n    \r\n    useEffect(() => {\r\n        getGrwthxInfo({ roomId, userId, assignmentId });\r\n        console.log(mode, \"mode\");\r\n        const tempUrl = `https://grwthx.grwth.hk/room/${mode === ROOM_PREVIEW_MESSAGE ? 'preview' : 'play'}/?roomId=${roomId}&userId=${userId}&assignmentId=${assignmentId}`;\r\n        setRoomUrl(tempUrl, 'tempUrl');\r\n    }, [roomId, userId, assignmentId]);\r\n\r\n    useEffect(() => {\r\n        if(infoGrwthResponse?.data?.user){\r\n            setRoomState(true);\r\n        }\r\n    },[infoGrwthResponse])\r\n    \r\n    \r\n    return (\r\n        <>\r\n            <PreviewIframe src={roomUrl} same-origin-allow />\r\n        </>\r\n    )\r\n        \r\n}\r\n\r\nexport default PlayPreview;"],"names":["Loadable","lazy","PreviewIframe","styled","border","height","width","margin","PlayPreview","roomState","setRoomState","useState","roomUrl","setRoomUrl","navigate","useNavigate","location","useLocation","cookies","useCookies","assignmentId","setAssignmentId","roomId","setRoomId","userId","setUserId","mode","setMode","getGrwthxInfo","infoGrwthResponse","useGetGrwthxInfoMutation","useEffect","_location$state","_location$state2","_location$state3","_location$state4","state","setTimeout","AUTHORISATION_TOKEN_STORAGE_KEY","console","log","tempUrl","ROOM_PREVIEW_MESSAGE","_infoGrwthResponse$da","data","user","_jsx","_Fragment","children","src"],"sourceRoot":""}